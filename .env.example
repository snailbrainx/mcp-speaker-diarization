# HuggingFace token for accessing pyannote models
# Get your token from: https://huggingface.co/settings/tokens
# Accept pyannote terms at: https://huggingface.co/pyannote/speaker-diarization-community-1
HF_TOKEN=your_huggingface_token_here

# Database URL
DATABASE_URL=sqlite:////app/volumes/speakers.db

# Speaker Recognition Settings
# Threshold for speaker similarity matching (0.0-1.0, lower = more strict)
# 0.30 = recommended for normal home usage (good balance of accuracy and matching)
# 0.20 = stricter matching for movie audio with background music/effects
SPEAKER_THRESHOLD=0.30

# Context padding around segments for embedding extraction (seconds)
# 0.15s = optimal for movie audio with background music/effects
CONTEXT_PADDING=0.15

# Filter out common Whisper hallucinations (true/false)
# Set to false if real speech is being filtered (e.g., actual "thank you" phrases)
FILTER_HALLUCINATIONS=true

# Emotion Detection Settings
# Global threshold for emotion matching (0.3-1.0, higher = stricter)
# 0.6 = balanced (recommended for most use cases)
# 0.7-0.8 = stricter matching, fewer false positives
# 0.4-0.5 = more lenient, applies personalization more often
EMOTION_THRESHOLD=0.6

# Whisper Transcription Model (faster-whisper with CTranslate2)
# Choose model based on your GPU capabilities:
# - tiny.en / tiny: ~400MB VRAM, fastest, lowest accuracy
# - base.en / base: ~500MB VRAM, very fast, basic accuracy
# - small.en / small: ~1GB VRAM, fast, good accuracy
# - medium.en / medium: ~2GB VRAM, slower, better accuracy
# - large-v3 / large-v2: ~3-4GB VRAM, slowest, best accuracy (recommended for production)
# Use .en models for English-only (slightly faster)
WHISPER_MODEL=large-v3

# Whisper Language Setting
# - "en" = English only (default, fastest)
# - "auto" = Auto-detect language (supports 99 languages)
# - Or specify: "es" (Spanish), "fr" (French), "de" (German), "zh" (Chinese), "ja" (Japanese), etc.
WHISPER_LANGUAGE=en

# Live Recording Settings
# Silence duration before processing segment (seconds)
# Lower = more responsive, but may cut off speech. Higher = more complete segments.
SILENCE_DURATION=0.5

# Offline Mode (force using cached models only, never download)
# Set to "true" to ensure the app works completely offline
# Requires models to be already cached in volumes/huggingface_cache/
# Default: "false" (allows downloading if models not cached)
OFFLINE_MODE=false

# GPU Memory Management
# Only cleanup VRAM if usage exceeds this threshold (in GB)
# Set to 0 to always cleanup (more aggressive, slower)
# Set to 99 to rarely cleanup (faster, may run out of VRAM)
# Recommended: 10-12 GB if running multiple models (leaves room for others)
# Default: 12 (cleanup when VRAM > 12GB)
# Also runs automatic cleanup every 30 seconds if VRAM > 12GB
CLEANUP_VRAM_THRESHOLD_GB=12
